<!doctype html>
<html lang="he" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
    <title>ğŸ§¼ ×¡×‘×•×Ÿ ×˜×‘×¢×™ ××—×œ×‘ ××: ×”×–× ×” ××”×× ×œ×ª×™× ×•×§</title>
    <style>
        :root{
            --gap:18px;
            --accent:#00695C; /* Dark Teal - for a natural/calm feel */
            --new-accent:#E91E63; /* NEW: Vivid Pink for headlines */
            --bg:#e0f7fa; /* Light Cyan Background */
            --text:#222;
            --success: #28a745;
            --error: #dc3545;
            --sidebar-width: 250px;
            --soft-white: #fefefe; 
        }
        html,body{
            height:100%;
            margin:0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans Hebrew', sans-serif;
            background: var(--bg);
            color:var(--text);
            overflow-x: hidden; 
            font-size: 18px; /* Base font size increase */
        }
        /* FIXED: Adjusted padding-top now that logo is static */
        .app{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px;padding-top: 24px;box-sizing:border-box; flex-direction: column;}
        
        .card{
            width:100%;
            max-width:1100px;
            background:linear-gradient(180deg,var(--soft-white),#fbfbfb);
            border-radius:16px;
            box-shadow:0 12px 40px rgba(0,0,0,0.15);
            overflow:hidden;
            display:block; /* Changed from flex to block */
        }
        
        /* ADJUSTED: Content padding reset for desktop */
        .content{flex:1;min-width:260px;padding:28px;display:flex;flex-direction:column;gap:14px}
        
        /* Typography - UPDATED */
        h1{
            margin:0;
            font-size:32px; /* INCREASED */
            color: var(--new-accent); /* NEW COLOR */
            text-align: center; /* CENTERED */
        }
        
        /* FIXED: Logo Style - Static positioning, centered block (non-floating) */
        .logo-header-wrapper {
            position: static; 
            margin: 0 auto 20px auto; /* Centering block and adding bottom margin */
            padding: 0; 
            z-index: 1; /* Lowered z-index */
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px; 
            background: none; 
            box-shadow: none; 
        }

        .logo-container { 
            /* Logo replacement styling - BIGGER */
            width: 200px; 
            height: 200px; 
            background-image: url('https://i.imgur.com/Df50Xpm.png'); 
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            /* Hide the 'K' text */
            text-indent: -9999px;
            display: inline-block;
            margin-left: 0;
        }
        
        /* REMOVED: Logo text styling is no longer needed */
        .logo-header-wrapper h1 { display: none; } 

        h2{
            font-size: 26px; /* INCREASED */
            color: var(--new-accent); /* NEW COLOR */
            border-bottom: 2px solid #eee; 
            padding-bottom: 8px; 
            margin-top: 25px; 
            font-weight: 700;
            text-align: center; /* CENTERED */
        }
        /* Adjusted h3 style for product list for better readability */
        h3{
            font-size: 22px; /* INCREASED */
            color: #444; 
            margin: 15px 0 5px;
            text-align: center; /* CENTERED */
        }
        .product-list h3 {
             color: var(--new-accent); /* Highlight product names */
             font-weight: 800; 
             margin-bottom: 5px;
             padding-bottom: 0;
             border-bottom: none;
             text-align: right; /* Keep product list H3 right aligned for better list flow */
        }

        p{margin:0;line-height:1.7; font-size: 18px;} /* INCREASED */
        .lead{font-weight:700; font-size: 20px;} /* ADJUSTED & INCREASED */
        
        /* Lists and Special Text */
        .natural-text { color: var(--new-accent); font-weight: 700; padding: 10px 0; border-right: 3px solid var(--new-accent); padding-right: 10px; font-size: 18px; } /* UPDATED COLOR AND FONT SIZE */
        .feature-list { list-style: none; padding: 0; margin: 10px 0; }
        /* FIXED: Changed nowrap â†’ wrap to prevent unwanted gaps on mobile */
        .feature-list li { 
            margin-bottom: 10px; 
            font-size: 18px; 
            display: flex; 
            align-items: center; 
            flex-wrap: wrap; /* â† Key fix: allows text to wrap naturally, no extra gaps */
        } 
        .feature-list li strong { font-weight: 700; color: #333; } /* This CSS ensures only the bolded part is stronger */
        .feature-icon { color: var(--new-accent); font-size: 24px; margin-left: 8px; line-height: 1; flex-shrink: 0; } /* flex-shrink: 0 to keep icon size */
        
        /* CTA & Coupon Styles */
        .cta{margin-top:auto;display:flex;gap:10px;flex-wrap:wrap;align-items:center}
        .btn{background:var(--accent);color:#fff;border:none;padding:14px 20px;border-radius:10px;font-weight:700;cursor:pointer;transition:all 0.3s; text-align: center; box-shadow: 0 4px 10px rgba(0,105,92,0.2); font-size: 18px;} /* INCREASED PADDING/FONT */
        .btn:hover{background:#004d40;transform:translateY(-2px);box-shadow:0 6px 16px rgba(0,105,92,0.4)}
        .price{font-size:26px;font-weight:800;color:var(--new-accent)} /* INCREASED & UPDATED COLOR */
        
        /* Coupon Styles */
        .coupon-section {
            display: flex;
            gap: 5px;
            align-items: center; 
            margin-top: 10px;
            flex-direction: column; 
        }
        .coupon-input-group {
            display: flex;
            gap: 8px;
            align-items: center;
            width: 100%;
            justify-content: center;
        }
        .coupon-section input {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 8px;
            width: 150px;
            font-size: 16px;
            text-align: center;
            direction: ltr; 
        }
        .btn-apply {
            background: var(--accent);
            border: 1px solid var(--accent);
            color: #fff;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            font-size: 16px;
            transition: all 0.2s;
        }

        .coupon-msg {
            font-size: 15px;
            font-weight: 700;
            min-height: 18px;
            text-align: center;
        }
        .coupon-msg.success { color: var(--success); }
        .coupon-msg.error { color: var(--error); }

        /* --- Carousel Specific CSS (UPDATED FOR FULL WIDTH AND CONTAIN) --- */
        .carousel-wrap{
            width:100%; /* Take full width of the app container */
            max-width:1100px; /* Match max width of the card */
            min-width:0; /* Allow it to shrink */
            background: transparent; /* FIXED: Changed to transparent */
            border-radius:12px;
            overflow:hidden;
            position:relative;
            display:flex;
            align-items:center;
            justify-content:center;
            /* Center block horizontally */
            margin: 0 auto 15px auto; /* REDUCED SPACE */
            /* Added fixed height for image uniformity */
            height: 400px; 
        }
        .slides-container {
            width: 100%;
            height: 100%; 
            overflow: hidden;
        }
        .slides {
            display: flex;
            transition: transform 0.5s ease-in-out;
            width: 300%; /* Total width for 3 slides */
            height: 100%; 
            direction: ltr; 
        }
        .slide {
            flex-shrink: 0;
            width: calc(100% / 3); /* Each slide takes up 1/3 of the 300% width */
            height: 100%;
            direction: rtl; 
        }
        .slide img{
            width:100%;
            height:100%;
            object-fit: contain; /* Remains 'contain' to avoid cropping */
            display:block
        }
        /* --- End Carousel Specific CSS --- */


        /* --- Compact Modal Styles (UPDATED FOR PERFECT CENTERING) --- */
        .modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.6);align-items:center;justify-content:center;}
        .modal.show{display:flex}
        
        .modal-content{
            background:var(--soft-white);
            padding: 12px 18px; /* Further reduced padding */
            border-radius:18px;
            max-width:420px;
            width:100%;
            text-align:right;
            box-shadow:0 30px 80px rgba(0,0,0,0.4); 
            margin: auto; 
            border-top: 5px solid var(--accent);
            max-height: 95vh; 
            overflow-y: auto; /* ENABLE SCROLLING INSIDE MODAL */
            box-sizing: border-box;
        }

        .modal h2{margin:0 0 10px;color:var(--new-accent); text-align: center; font-size: 26px; border-bottom: none; padding-bottom: 0;} /* INCREASED & UPDATED COLOR */
        .modal h3{color:#333; margin-top: 5px; font-size: 20px; text-align: center; padding: 5px 0;} /* INCREASED */
        .modal p{margin:5px 0;line-height:1.5; font-size: 16px;} /* INCREASED */
        .modal-buttons{display:flex;gap:10px;margin-top:15px;justify-content:center; flex-wrap: wrap;}
        
        /* Compact Form Elements */
        select{width:100%;padding:8px;border-radius:8px;border:1px solid #ddd;font-size:16px;text-align:right;cursor:pointer; background-color: #f9f9f9;}
        
        .form-group{margin-bottom: 10px; text-align: right;} 
        .form-group label{display: block; margin-bottom: 2px; font-weight: 600; color: #333; font-size: 14px;}
        .form-group input, .form-group textarea{width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 16px; background-color: #f9f9f9; min-height: 38px;}
        .form-group textarea { resize: vertical; min-height: 60px; }
        
        .price-container {
            text-align: center;
            padding: 5px;
            margin-top: 5px !important;
        }
        .old-price {
            text-decoration: line-through;
            color: #999;
            font-size: 14px;
            margin-left: 10px;
            display: none;
        }
        .old-price.show { display: inline-block; }

        /* Payment Modal Specific Styling */
        #paymentModalTitle {
            font-size: 24px;
            font-weight: 800;
            margin-bottom: 5px;
        }
        #paymentModal .modal-content {
            background: linear-gradient(135deg, var(--soft-white), #f0fff0); 
            max-width: 380px;
            padding: 25px;
            text-align: center; 
        }
        #paymentModal p {
            text-align: center;
            font-size: 15px;
            color: #555;
            margin: 10px 0;
        }
        #paymentModal p strong {
            display: block;
            font-size: 24px;
            color: var(--accent);
            margin-top: 5px;
        }
        #paymentTotalAmount {
            font-size: 32px !important; /* INCREASED & UPDATED COLOR */
            font-weight: 800;
            color: var(--new-accent); 
            display: inline;
            direction: ltr;
        }
        #paymentModal .modal-buttons { /* Specific rule for payment buttons margin to reduce gap */
            margin-top: 5px; 
        }
        #openBitApp {
            background-color: #4CAF50; 
            transition: all 0.3s;
            padding: 12px 20px;
            font-size: 18px;
            margin-top: 10px;
        }
        #openBitApp:hover {
            background-color: #388E3C;
        }

        /* NEW: Flex group for total and copies */
        .total-copies-group {
             display: flex;
             justify-content: space-around;
             align-items: center;
             gap: 15px;
        }
        .total-copies-group .form-group {
             flex: 1;
             margin-bottom: 0;
        }
        .total-copies-group .price-display {
             flex-shrink: 0;
             text-align: center;
        }
        /* Mobile adjustment for copies select width */
        #productSelectionModal #copies {
            width: 100%;
        }
        
        /* Specific changes for Shipping Modal */
        #shippingDetailsModal .modal-buttons .btn {
            padding: 10px 15px; /* Reduced button padding for smaller size */
            font-size: 16px;
        }
        #shippingDetailsModal .modal-content {
            max-width: 380px; /* Adjusted max width for better mobile fit */
        }
        
        /* --- General Instructions List with Red Bullets (UPDATED FOR RED TEXT AND BOLD) --- */
        .general-instructions-list {
            list-style: none; 
            padding-right: 20px; 
            margin-top: 10px;
            font-size: 16px; 
        }
        .general-instructions-list li {
            position: relative;
            margin-bottom: 8px; 
            padding-right: 12px; 
            color: var(--error); /* MADE ALL TEXT RED */
            line-height: 1.5;
            font-weight: 700; /* ADDED: Make all text bold */
        }
        /* Custom red bullet for all items */
        .general-instructions-list li::before {
            content: 'â€¢'; 
            position: absolute;
            right: 0;
            color: var(--error); /* Red color for the bullet */
            font-weight: 900;
            font-size: 1.2em;
            top: 0;
        }
        /* Style for the last, important item (keep bold - now redundant but harmless) */
        .general-instructions-list li.important-note {
            font-weight: 700; 
            margin-bottom: 0;
        }
        
        /* --- Sidebar Styles (UPDATED TO FLOATING/FIXED TOGGLE) --- */
        #sidebar-toggle {
            /* FIXED: Floating Styles */
            position: fixed; 
            top: 20px;
            right: 20px; /* FIXED: Positioned to the right */
            left: auto; /* Ensure left is not set */
            
            background: var(--accent);
            color: #fff;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            z-index: 100; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .sidebar {
            position: fixed;
            top: 0;
            right: -270px; 
            width: var(--sidebar-width);
            height: 100%;
            background: var(--soft-white);
            box-shadow: none;
            transition: right 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            z-index: 150; 
            padding: 25px 20px;
            box-sizing: border-box;
            overflow-y: auto;
            text-align: right;
        }
        .sidebar.open {
            right: 0; 
            box-shadow: -4px 0 15px rgba(0,0,0,0.15); 
        }
        .close-sidebar {
            background: none;
            border: none;
            font-size: 35px;
            position: absolute;
            left: 10px;
            top: 5px;
            cursor: pointer;
            color: var(--accent);
            line-height: 1;
            font-weight: 300;
        }
        .sidebar h3 {
            color: var(--accent);
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            margin-top: 0;
        }
        .sidebar ul {
            list-style: none;
            padding: 0;
        }
        .sidebar li {
            margin-bottom: 10px;
        }
        .sidebar a {
            color: var(--text);
            text-decoration: none;
            display: block;
            padding: 8px 0;
            transition: color 0.2s;
            font-weight: 500;
        }
        .sidebar a:hover {
            color: #00897B; 
            padding-right: 5px;
        }
        
        /* Overlay for Sidebar */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 120; 
            cursor: pointer;
        }
        .overlay.show {
            display: block;
        }

        /* NEW: Gift package image gallery */
        .gift-gallery {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }
        .gift-gallery img {
            width: 300px;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            object-fit: cover;
        }

        /* Responsive */
        @media (max-width:900px){
            .card{
                display: block;
            }
            .carousel-wrap{
                width:100%;
                max-width:1100px;
                min-width:0;
                height:350px;
                margin-bottom: 10px;
            }
            .content{padding:18px;}
            
            .logo-header-wrapper {
                 margin-bottom: 15px;
            }
            .logo-container { 
                width: 120px;
                height: 120px;
            }
            
            #sidebar-toggle {
                right: 15px;
                left: auto;
                top: 15px;
                margin: 0;
                padding: 8px 12px;
                font-size: 14px;
                z-index: 1000;
            }
            
            .app {
                padding-top: 24px;
            }
            
            /* Mobile: smaller font + wrap allowed */
            .feature-list li { 
                font-size: 15px;
                flex-wrap: wrap; /* Ensures consistent spacing on mobile */
            }
            
            /* Modal adjustments for smaller devices */
            .modal-content {
                padding: 10px;
                width: 95%;
            }
            .form-group { margin-bottom: 5px; }
            .modal h2 { font-size: 24px; margin-bottom: 5px; }
            .modal h3 { margin-top: 3px; font-size: 18px; padding: 3px 0; margin-bottom: 3px; }
            hr { margin: 8px 0 !important; }
            
            #shippingDetailsModal .modal-content {
                max-width: 95vw;
                padding: 15px;
            }
            #shippingDetailsModal .modal-buttons .btn {
                padding: 10px 10px;
                font-size: 15px;
            }

            .gift-gallery img {
                width: 100%;
                max-width: 300px;
            }
        }
        
        @media (max-width: 550px) {
            .logo-container { 
                width: 100px;
                height: 100px;
            }
            
            #sidebar-toggle {
                padding: 8px 12px;
                font-size: 14px;
            }
            .sidebar {
                --sidebar-width: 220px; 
                right: -240px; 
            }
            .sidebar.open {
                right: 0; 
            }
            
            .app {
                padding-top: 24px;
            }

            .feature-list li {
                flex-wrap: wrap; /* Consistent on very small screens */
            }
        }

    </style>
</head>
<body>
    <div class="overlay" id="sidebar-overlay"></div>
    <div class="sidebar" id="sidebar">
        <button class="close-sidebar" id="close-sidebar-btn">Ã—</button> 
        <h3>×ª×•×›×Ÿ ×¢× ×™×™× ×™× âœ¨</h3>
        <ul>
            <li><a href="#product-description">××•×“×•×ª ×”××•×¦×¨</a></li>
            <li><a href="#benefits">×™×ª×¨×•× ×•×ª ×”×¡×‘×•×Ÿ</a></li>
            <li><a href="#about-coral">×”×¡×™×¤×•×¨ ×©×œ× ×•</a></li>
            <li><a href="#product-variations">ğŸŒ± ×”××•×¦×¨×™× ×©×œ× ×•</a></li>
            <li><a href="#order-form">×”×–×× ×” ×•×ª×©×œ×•×</a></li>
        </ul>
        <p style="margin-top: 30px; font-size: 14px; color: #666;">
            ×œ×›×œ ×©××œ×” × ×•×¡×¤×ª, × ×™×ª×Ÿ ×œ×™×¦×•×¨ ×§×©×¨.
            <br>
            ×§×•×¨×œ: 050-8463242
        </p>
    </div>

    <div class="app">
        
        <div class="logo-header-wrapper">
            <span class="logo-container">K</span> 
        </div>
        
        <button id="sidebar-toggle">×ª×¤×¨×™×˜ â˜°</button>
        
        <div class="carousel-wrap" aria-roledescription="carousel">
            <div class="slides-container">
                <div class="slides" id="slides">
                    <div class="slide"><img alt="×¡×‘×•×Ÿ ××—×œ×‘ ×× ×˜×‘×¢×™ - ×ª××•× ×” 1" src="https://i.imgur.com/cjbToe2.jpeg"/></div>
                    <div class="slide"><img alt="×¡×‘×•×Ÿ ××—×œ×‘ ×× ×˜×‘×¢×™ - ×ª××•× ×” 2" src="https://i.imgur.com/E1cDUXD.jpeg"/></div>
                    <div class="slide"><img alt="×¡×‘×•×Ÿ ××—×œ×‘ ×× ×˜×‘×¢×™ - ×ª××•× ×” 3" src="https://i.imgur.com/m2nDchP.jpeg"/></div>
                </div>
            </div>
        </div>
        <div class="card" role="application">
            
            <div class="content">

                <h1>×¡×‘×•×Ÿ ×˜×‘×¢×™ ××—×œ×‘ ××</h1>
                <p class="lead" style="color: #444; text-align: center;">
                    ×˜×‘×¢×™. ××™×©×™. ××”×œ×‘
                </p>

                <p class="lead" id="product-description">
                    ×”×¢× ×™×§×™ ×œ×ª×™× ×•×§×š ××ª× ×” ××¤× ×§×ª ×•××–×™× ×” â€“ ××œ-×¡×‘×•×Ÿ ×™×™×—×•×“×™ ×•×˜×‘×¢×™ ×”×¢×©×•×™ ××—×œ×‘ ×”×× ×©×œ×š. ×”×–× ×” ×™×©×™×¨×” ×“×¨×š ×”×¢×•×¨.
                </p>

                <div class="natural-text">
                    ×”×¡×‘×•×Ÿ ××©×œ×‘ ××ª ×—×œ×‘ ×”×× ×¢× ×©×× ×™× ×˜×‘×¢×™×™× × ×•×¡×¤×™×, ×•× ×•×¢×“ ×œ×”×§×œ ×¢×œ ×ª×¡××™× ×™ ×™×•×‘×©, ×’×™×¨×•×™, ××“××•××™×•×ª ×•×ª×¡××™× ×™ ××¡×ª××” ×©×œ ×”×¢×•×¨. 
                </div>

                <h2 id="benefits">ğŸŒ¿ ×™×ª×¨×•× ×•×ª ×”×¡×‘×•×Ÿ ×”×˜×‘×¢×™</h2>
                <ul class="feature-list">
                    <li><span class="feature-icon">âœ”ï¸</span> <strong>××’×™×œ ×œ×™×“×”:</strong>××ª××™× ×œ×¢×•×¨ ×”×¨×’×™×© ×‘×™×•×ª×¨.</li>
                    <li><span class="feature-icon">âœ¨</span> <strong>×”×§×œ×” ××™×™×“×™×ª:</strong>××ª××™× ×œ×¢×•×¨ ×¨×’×™×© ×•×œ×ª×™× ×•×§×•×ª ×©×¡×•×‘×œ×™× ×"×§×œ×™×¤×”" (×§×©×§×©×ª) ×‘×¨××©.</li>
                    <li><span class="feature-icon">ğŸŒ±</span> <strong>×¨×›×™×‘×™× ×˜×‘×¢×™×™× ×‘×œ×‘×“:</strong>×œ×œ× SLS, ×¤×¨××‘× ×™×, ×—×•××¨×™ ×¨×™×— ×¡×™× ×˜×˜×™×™× ××• ×›×™××™×§×œ×™× ×§×©×™×.</li>
                    <li><span class="feature-icon">ğŸ‘</span> <strong>×™×™×¦×•×¨ ×‘×©×™×˜×” ×§×¨×”:</strong>××™×•×¦×¨ ×‘×¢×‘×•×“×ª ×™×“, ×ª×•×š ×©××™×¨×” ××§×¡×™××œ×™×ª ×¢×œ ×”×¨×›×™×‘×™× ×”×¤×¢×™×œ×™× ×•×”××™× ×¨×œ×™× ×©×‘×—×œ×‘ ×”××.</li>
                </ul>

                <h2 id="about-coral">ğŸ’– ×§×¦×ª ×¢×œ×™×™ ×•×¢×œ ×¡×’×•×œ×•×ª ×—×œ×‘ ×”××</h2>
                <p>
                    × ×¢×™× ×œ×”×›×™×¨, ×©××™ ×§×•×¨×œ, ×¢×•×¨×›×ª-×“×™×Ÿ ×•××™×× ×œ×©× ×™ ×‘× ×™× ××§×¡×™××™×. ×”×¨×¢×™×•×Ÿ ×œ×™×™×¦×¨ ××œ-×¡×‘×•×Ÿ ××—×œ×‘ ×× × ×•×œ×“ ××ª×•×š × ×™×¡×™×•× ×™ ×”××™×©×™ ×¢× ×‘× ×™ ×”×‘×›×•×¨ ×©×¡×‘×œ ××ª×¡××™× ×™× ×§×©×™× ×©×œ ××¡×ª××” ×©×œ ×”×¢×•×¨.
                </p>
                <p>
                    ×œ××—×¨ ×©× ×™×¡×™×ª×™ ××™× ×¡×¤×•×¨ ×ª×›×©×™×¨×™× ×™×§×¨×™× ×œ×œ× ×”×¦×œ×—×”, × ×—×©×¤×ª×™ ×œ×¡×’×•×œ×•×ª ×”××“×™×¨×•×ª ×©×œ ×—×œ×‘ ×× ×›×ª×¨×›×•×‘×ª ××–×™× ×”, ××œ××ª ×œ×—×•×ª ×•× ×•×’×“× ×™×. ×××– ×©×”×ª×—×œ×ª×™ ×œ×¨×§×•×— ×¡×‘×•× ×™ ×—×œ×‘ ××, ×¢×•×¨×• ×©×œ ×‘× ×™ ×”×©×ª×¤×¨ ×¤×œ××™×. ×”×¨×’×©×ª×™ ×©×× ×™ ×—×™×™×‘×ª ×œ×—×œ×•×§ ××ª ×”×¤×œ× ×”×–×” ×’× ×¢× ××™××”×•×ª ××—×¨×•×ª.
                </p>
                
                <h2 id="product-variations">ğŸŒ± ×”××•×¦×¨×™× ×©×œ× ×•:</h2>

                <p style="font-size: 18px; font-weight: 700; color: var(--error); text-align: center; margin-bottom: 20px;">
                    âš ï¸ ××™× ×™××•× ×”×–×× ×”: 2 ×™×—×™×“×•×ª
                </p>
                
                <p style="font-size: 16px; font-weight: 600; color: var(--accent); margin-bottom: 15px; border-right: 3px solid var(--accent); padding-right: 10px;">
                    × ×™×ª×Ÿ ×œ×‘×§×© ××ª×›×•×Ÿ ××•×ª×× ××™×©×™×ª, ×œ×¤×™ ×”× ×ª×•× ×™× ×”××™×©×™×™× ×©×œ ×¢×•×¨ ×”×ª×™× ×•×§ ×©×œ×š.
                </p>

                <div class="product-list" style="display: flex; flex-direction: column; gap: 20px;">
                    
                    <div class="product-item">
                        <h3>1. ××’×¢ ××–×™×Ÿ</h3>
                        <p style="font-weight: 600;">×ª×›×©×™×¨ ×œ×—×•×ª ×©××¢× ×™×§ ×œ×—×•×ª ×¢××•×§×” ×œ×¢×•×¨ ×™×‘×©, ×›××• ×—×™×‘×•×§ ××—×× ×©×œ ××™××.</p>
                        <p style="font-size: 14px; color: #555;">××œ-×¡×‘×•×Ÿ ×’×•×£ ×¢×“×™×Ÿ ×•××¢×•×¨×¨ ×œ×—×•×ª ×œ×¢×•×¨ ×™×‘×©. ××›×™×œ ×—×××ª ×©×™××” ×•×©××Ÿ ×©×§×“×™×.</p>
                    </div>

                    <div class="product-item">
                        <h3>2. ××’×¢ ××ª×•×§</h3>
                        <p style="font-weight: 600;">×ª×›×©×™×¨ ×œ×—×•×ª ××¤× ×§ ×¢× ×¨×™×— ×˜×‘×¢×™ ×¢×“×™×Ÿ, ×›××• × ×©×™×§×” ××•×”×‘×ª ×©×œ ××™××.</p>
                        <p style="font-size: 14px; color: #555;">××œ-×¡×‘×•×Ÿ ××¤× ×§ ×¢× ×¨×™×— ×˜×‘×¢×™ ×¢×“×™×Ÿ ×©×œ ×§×§××•. ××›×™×œ ×—×××ª ×§×§××• ×•×©××Ÿ ×–×™×ª.</p>
                    </div>

                    <div class="product-item">
                        <h3>3. ××’×¢ ×˜×”×•×¨</h3>
                        <p style="font-weight: 600;">×ª×›×©×™×¨ ×œ×—×•×ª ×¢×“×™×Ÿ ×œ× ×™×§×•×™ ×¢×•×¨ ×¨×’×™×©, ×›××• ××’×¢ × ×§×™ ×•×˜×”×•×¨ ×©×œ ××™××.</p>
                        <p style="font-size: 14px; color: #555;">××œ-×¡×‘×•×Ÿ ×¤× ×™× ×¢×“×™×Ÿ ×œ× ×™×§×•×™ ×¢×•×¨ ×¨×’×™×©. ××›×™×œ ×—×™××¨ ×œ×‘×Ÿ ×•×©××Ÿ ×—×•×—×•×‘×”.</p>
                    </div>

                    <div class="product-item">
                        <h3>4. ××’×¢ ×¤×•×¨×—</h3>
                        <p style="font-weight: 600;">×ª×›×©×™×¨ ×œ×—×•×ª ××¨×’×™×¢ ×œ×¢×•×¨ ××“××•××™, ×›××• ×œ×™×˜×•×£ ××™××”×™ ×¢×“×™×Ÿ.</p>
                        <p style="font-size: 14px; color: #555;">××œ-×¡×‘×•×Ÿ ×’×•×£ ××¨×’×™×¢ ×œ×¢×•×¨ ××“××•××™ ××• ××’×•×¨×”. ××›×™×œ ×©××Ÿ ×§×œ× ×“×•×œ×” ××•×¨×’× ×™ ×•×©×™×‘×•×œ×ª ×©×•×¢×œ.</p>
                    </div>

                    <div class="product-item">
                        <h3>5. ××’×¢ ××•×”×‘</h3>
                        <p style="font-weight: 600;">×ª×›×©×™×¨ ×œ×—×•×ª ×¢×“×™×Ÿ ×œ× ×™×§×•×™ ×¢×•×¨ ×•×©×™×¢×¨, ×›××• ××”×‘×ª ×× ×©××™× ×” × ×’××¨×ª.</p>
                        <p style="font-size: 14px; color: #555;">××œ-×¡×‘×•×Ÿ ×¢×“×™×Ÿ ×œ× ×™×§×•×™ ×”×©×™×¢×¨ ×•×”×§×¨×§×¤×ª. ××›×™×œ ×©××Ÿ ×§×™×§ ×•×©××Ÿ ×–×¨×¢×™ ×¢× ×‘×™×.</p>
                    </div>

                    <div class="product-item">
                        <h3>6. ××’×¢ ×—××™×</h3>
                        <p style="font-weight: 600;">×ª×›×©×™×¨ ×œ×—×•×ª ××–×™×Ÿ ×œ×¢×•×¨ ×™×‘×©, ×›××• ×ª×—×•×©×ª ×—××™××•×ª ×©×œ ×‘×™×ª ×•××™××.</p>
                        <p style="font-size: 14px; color: #555;">××œ-×¡×‘×•×Ÿ ××–×™×Ÿ ×œ×¢×•×¨ ×™×‘×© ×‘××™×•×—×“. ××›×™×œ ×©××Ÿ ×©×•××©×•×.</p>
                    </div>
                    
                    <div class="product-item">
                        <h3>7. ××’×¢ ××’×•× ×Ÿ</h3>
                        <p style="font-weight: 600;">×ª×›×©×™×¨ ×œ×—×•×ª ×œ×¢×•×¨ ×¨×’×™×© ×•×¢×“×™×Ÿ, ×›××• ×™×“ ××™××”×™×ª ××’×•× × ×ª.</p>
                        <p style="font-size: 14px; color: #555;">××œ-×¡×‘×•×Ÿ ×˜×™×¤×•×œ×™ ×œ×¢×•×¨ ×¨×’×™×©, ××ª××™× ×‘××™×•×—×“ ×œ×ª×™× ×•×§×•×ª ×¢× × ×˜×™×™×” ×œ××“××•××™×•×ª. ××›×™×œ ×©××Ÿ ××•×‘×œ×™×¤×™×—×” ××•×¨×’× ×™.</p>
                    </div>

                </div>

                <h2 style="margin-top: 40px;">ğŸ ×××¨×– ×œ×™×•×œ×“×ª</h2>
                <p style="font-size: 18px; text-align: center;">
                    ××ª× ×” ××¨×’×©×ª ×•××§×¡×™××” ×œ×—×‘×¨×” ×©×—×•×‘×§×ª ×ª×™× ×•×§ ×—×“×© ×•×˜×”×•×¨.<br>
                    ×‘×××¨×– ×œ×™×•×œ×“×ª × ×™×ª×Ÿ ×œ×§×‘×œ ××ª ×”××ª×›×•× ×™× ×”× "×œ ×‘×©×‘×œ×•× ×•×ª ××ª×•×§×•×ª ×•××™×•×—×“×•×ª, ×‘×××¨×– ××¤× ×§ ×•××¨×’×©!
                </p>

                <div class="gift-gallery">
                    <img src="https://i.imgur.com/YyqzypY.jpeg" alt="×××¨×– ×¡×‘×•× ×™× ×‘×¦×•×¨×ª ×œ×‘ - ×“×•×’××” 1 (×œ×”××—×©×” ×‘×œ×‘×“)">
                    <img src="https://i.imgur.com/NbDhnFU.jpeg" alt="×××¨×– ×¡×‘×•× ×™× ×‘×¦×•×¨×ª ×œ×‘ - ×“×•×’××” 2 (×œ×”××—×©×” ×‘×œ×‘×“)">
                    <img src="https://i.imgur.com/RiayNqR.jpeg" alt="×××¨×– ×¡×‘×•× ×™× ×‘×¦×•×¨×ª ×œ×‘ - ×“×•×’××” 3 (×œ×”××—×©×” ×‘×œ×‘×“)">
                </div>

                <p style="font-size: 14px; color: #666; text-align: center; margin-top: 10px;">
                    * ×”×ª××•× ×•×ª ×œ×”××—×©×” ×‘×œ×‘×“. ×˜.×œ.×—
                </p>

                <h3 style="margin-top: 30px; border-bottom: 2px solid #eee; padding-bottom: 5px; color: var(--new-accent); text-align: center;">âš ï¸ ×”× ×—×™×•×ª ×›×œ×œ×™×•×ª</h3>
                
                <p style="font-size: 16px; color: #555; margin-bottom: 5px;">
                    ××™×š ×–×” ×¢×•×‘×“? × ×™×ª×Ÿ ×œ×”×‘×™× ××ª ×—×œ×‘ ×”×× ×”××™×©×™ ×©×œ×š ×œ××¡×¤×¨ × ×§×•×“×•×ª ××™×¡×•×£, ××• ×œ×”×©×ª××© ×‘×—×œ×‘ ×× ×©×œ ×ª×•×¨××ª. ×›××•×ª ×”×—×œ×‘ ×”×“×¨×•×©×” ×”×™× 40 ×"×œ ×œ×™×—×™×“×”. 
                </p>
                
                <ul class="general-instructions-list">
                    <li>×”×¡×‘×•×Ÿ ××™× ×• ×ª×¨×•×¤×” ×•××™× ×• ×¨××•×™ ×œ×××›×œ.</li>
                    <li>××™×Ÿ ×œ×‘×œ×•×¢, ×™×© ×œ×”×¤×¡×™×§ ××ª ×”×©×™××•×© ×‘××§×¨×” ×©×œ ×’×™×¨×•×™.</li>
                    <li>×”×™×•×ª ×©××“×•×‘×¨ ×‘××œ-×¡×‘×•×Ÿ ×¢×‘×•×“×ª ×™×“, ×”×¨×™ ×©×”×’×•×“×œ, ×”×¦×‘×¢, ×”××¨×§× ×•×”××©×§×œ ×¢×©×•×™×™× ×œ×”×©×ª× ×•×ª.</li>
                    <li class="important-note">×ª×•×§×£ ×”×¡×‘×•×Ÿ: ×—×•×“×©×™×™×. ×™×© ×œ×©××•×¨ ×‘×§×™×¨×•×¨.</li>
                </ul>

                <h2 id="order-form">ğŸ ×”×–×× ×” ×•×ª×©×œ×•×</h2>
                
                <div class="cta" style="margin-top: 10px;">
                    <button class="btn" id="openOrderModalBtn" style="width: 100%;">×œ×”×–×× ×” ×•×œ××¢×‘×¨ ×œ×ª×©×œ×•× ğŸ›’</button>
                </div>
                
            </div>
            
            </div>
    </div>

    <div class="modal" id="productSelectionModal">
        <div class="modal-content">
            <h2>×©×œ×‘ 1: ×‘×—×™×¨×ª ××•×¦×¨ ×•×¢×™×¦×•×‘ ğŸ§¼</h2>
            
            <div class="form-group">
                <label for="copies">×›××•×ª ×¡×‘×•× ×™×:</label>
                <select id="copies">
                    <option value="2">2 ×™×—' (â‚ª80)</option>
                    <option value="4">4 ×™×—' (â‚ª160)</option>
                    <option value="6">6 ×™×—' (â‚ª240)</option>
                    <option value="10">10 ×™×—' (â‚ª400)</option>
                </select>
            </div>

            <div class="form-group">
                <label for="recipe">×©× ×”××ª×›×•×Ÿ / ××’×¢:</label>
                <select id="recipe" required>
                    <option value="" disabled selected>×‘×—×¨ ××ª×›×•×Ÿ (××’×¢ ××–×™×Ÿ, ××ª×•×§, ×˜×”×•×¨...)</option>
                    <option value="××’×¢ ××–×™×Ÿ">××’×¢ ××–×™×Ÿ</option>
                    <option value="××’×¢ ××ª×•×§">××’×¢ ××ª×•×§</option>
                    <option value="××’×¢ ×˜×”×•×¨">××’×¢ ×˜×”×•×¨</option>
                    <option value="××’×¢ ×¤×•×¨×—">××’×¢ ×¤×•×¨×—</option>
                    <option value="××’×¢ ××•×”×‘">××’×¢ ××•×”×‘</option>
                    <option value="××’×¢ ×—××™×">××’×¢ ×—××™×</option>
                    <option value="××’×¢ ××’×•× ×Ÿ">××’×¢ ××’×•× ×Ÿ</option>
                </select>
            </div>

            <div class="form-group">
                <label for="shape">×¦×•×¨×”:</label>
                <select id="shape" required>
                    <option value="" disabled selected>×‘×—×¨ ×¦×•×¨×”</option>
                    <option value="××œ×‘× ×™×ª">××œ×‘× ×™×ª</option>
                    <option value="×©×•×©× ×”">×©×•×©× ×”</option>
                    <option value="×œ×‘">×œ×‘</option>
                </select>
            </div>

            <div class="form-group">
                <label for="essentialOil">×©××Ÿ ××ª×¨×™:</label>
                <select id="essentialOil">
                    <option value="×œ×œ×">×œ×œ×</option>
                    <option value="×œ×‘× ×“×¨">×œ×‘× ×“×¨</option>
                    <option value="×§××•××™×œ">×§××•××™×œ</option>
                    <option value="×¢×¥ ×”×ª×”">×¢×¥ ×”×ª×”</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="blessing">×”×•×¡×¤×ª ×‘×¨×›×” (×˜×§×¡×˜ ×¢×“ 50 ××•×ª×™×•×ª - ××•×¤×¦×™×•× ×œ×™):</label>
                <textarea id="blessing" maxlength="50" placeholder="×œ×“×•×’××”: ×œ×™×œ×“ ×”××ª×•×§ ×©×œ× ×•, ×‘××”×‘×” ×’×“×•×œ×”."></textarea>
            </div>
            
            <div class="price-container">
                <div class="price" id="totalPrice" style="font-size: 24px;">â‚ª80</div>
                <span class="old-price" id="oldPrice"></span>
            </div>

            <div class="coupon-section">
                <div class="coupon-input-group">
                    <input type="text" id="couponCode" placeholder="×§×•×“ ×§×•×¤×•×Ÿ">
                    <button type="button" class="btn-apply" id="applyCouponBtn">×”×—×œ</button>
                </div>
                <div class="coupon-msg" id="couponMsg"></div>
            </div>

            <div class="modal-buttons">
                <button class="btn" id="continueToShippingBtn" style="flex-grow: 1;">×”××©×š ×œ×¤×¨×˜×™ ××©×œ×•×—</button>
                <button class="btn close-modal" data-modal="productSelectionModal" style="background: #999; flex-grow: 1;">×‘×™×˜×•×œ</button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="shippingDetailsModal">
        <div class="modal-content">
            <h2>×©×œ×‘ 2: ×¤×¨×˜×™ ××©×œ×•×— ×•×”×ª×××” ğŸšš</h2>
            
            <div class="form-group"><label for="shippingName">×©× ××œ×</label><input type="text" id="shippingName" required placeholder="×©× ×•×©× ××©×¤×—×”"></div>
            <div class="form-group"><label for="shippingPhone">×˜×œ×¤×•×Ÿ</label><input type="tel" id="shippingPhone" required placeholder="05X-XXXXXXX"></div>
            <div class="form-group"><label for="shippingEmail">×“×•×"×œ</label><input type="email" id="shippingEmail" required placeholder="example@mail.com"></div>
            <div class="form-group"><label for="shippingCity">×¢×™×¨</label><input type="text" id="shippingCity" required placeholder="×œ×“×•×’××”: ×ª×œ ××‘×™×‘"></div>
            <div class="form-group"><label for="shippingAddress">×›×ª×•×‘×ª</label><input type="text" id="shippingAddress" required placeholder="×¨×—×•×‘, ××¡×¤×¨ ×‘×™×ª, ×“×™×¨×”"></div>
            
            <hr style="border: 0; border-top: 1px dashed #eee; margin: 8px 0;">

            <div class="form-group"><label for="babyAge">×’×™×œ ×”×ª×™× ×•×§ (×—×•×“×©×™×)</label><input type="number" id="babyAge" required placeholder="×œ×“×•×’××”: 3" min="0" max="48"></div>
            <div class="form-group"><label for="allergies">××œ×¨×’×™×•×ª / ×”×¢×¨×•×ª × ×•×¡×¤×•×ª (××•×¤×¦×™×•× ×œ×™)</label><textarea id="allergies" placeholder="×¦×™×™×Ÿ ××œ×¨×’×™×•×ª ×™×“×•×¢×•×ª ××• ×‘×§×©×•×ª × ×•×¡×¤×•×ª"></textarea></div>

            <div class="modal-buttons">
                <button class="btn" id="backToProductsBtn" style="background: #999; flex-grow: 1;">×—×–×¨×” ×œ×‘×—×™×¨×ª ××•×¦×¨</button>
                <button class="btn" id="continueToPaymentBtn" style="flex-grow: 1;">×”××©×š ×œ×ª×©×œ×•×</button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <h2 id="paymentModalTitle">×©×œ×‘ ×”×ª×©×œ×•× âœ…</h2>
            <p>
                <strong>×¡×›×•× ×¡×•×¤×™ ×œ×ª×©×œ×•×: <span id="paymentTotalAmount">â‚ª80</span></strong>
            </p>
            <hr style="border: 0; border-top: 1px solid #ddd; margin: 15px 0;">
            <p style="font-size: 14px;">
                ×œ×—×™×¦×” ×¢×œ ×”×›×¤×ª×•×¨ ×ª×©×œ×— ××œ×™× ×• ××ª ×¤×¨×˜×™ ×”×”×–×× ×” ×©×œ×š ×•×ª×¢×‘×™×¨ ××•×ª×š ×œ×ª×©×œ×•× ×××•×‘×˜×— ×‘×××¦×¢×•×ª ××¤×œ×™×§×¦×™×™×ª Bit.*×œ× ×™×•×¤×™×¢ ×—×™×•×•×™ ×œ××—×¨ ×”×ª×©×œ×•×. ××¡××›×ª× ×ª×™×©×œ×— ×œ××—×¨ ×‘×“×™×§×ª × ×ª×•× ×™ ×”×¢×¡×§×”
            </p>
            <div class="modal-buttons" style="flex-direction: column; width: 100%;">
                <button class="btn" id="openBitApp" style="width: 100%;">××¢×‘×¨ ×œ×ª×©×œ×•× (Bit)</button>
                <button class="btn close-modal" data-modal="paymentModal" style="background: #999; width: 100%; margin-top: 5px;">×‘×™×˜×•×œ ×•×—×–×¨×”</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    
    <script>
        // ×”×—×œ×£ ×‘-User ID ×”×××™×ª×™ ×©×œ×š ×-EmailJS
        emailjs.init('ecHybfD_vT68aQGnO'); 

        const PRICE_PER_SOAP = 40; 
        
        const COUPONS = {
            'CORAL20': 0.20, // 20% discount
            'MAMA10': 0.10,  // 10% discount
            'YOLEDET': 0.15 // 15% discount
        };
        let isDiscountApplied = false;
        let discountRate = 0; 

        // Elements
        const copiesInput = document.getElementById('copies');
        const totalPriceEl = document.getElementById('totalPrice');
        const oldPriceEl = document.getElementById('oldPrice'); 
        
        const openOrderModalBtn = document.getElementById('openOrderModalBtn'); 

        // Step 1 Modals
        const productSelectionModal = document.getElementById('productSelectionModal');
        const continueToShippingBtn = document.getElementById('continueToShippingBtn');
        
        // Step 2 Modals
        const shippingDetailsModal = document.getElementById('shippingDetailsModal');
        const backToProductsBtn = document.getElementById('backToProductsBtn');
        const continueToPaymentBtn = document.getElementById('continueToPaymentBtn');
        
        // Step 3 Modals
        const paymentModal = document.getElementById('paymentModal');
        const paymentTotalAmount = document.getElementById('paymentTotalAmount');
        const openBitApp = document.getElementById('openBitApp'); 

        const couponInput = document.getElementById('couponCode');
        const applyCouponBtn = document.getElementById('applyCouponBtn');
        const couponMsg = document.getElementById('couponMsg');

        // NEW ORDER FIELDS
        const recipeInput = document.getElementById('recipe');
        const shapeInput = document.getElementById('shape');
        const essentialOilInput = document.getElementById('essentialOil');
        const blessingInput = document.getElementById('blessing');
        
        // SHIPPING FIELDS
        const shippingName = document.getElementById('shippingName');
        const shippingPhone = document.getElementById('shippingPhone');
        const shippingEmail = document.getElementById('shippingEmail');
        const shippingCity = document.getElementById('shippingCity');
        const shippingAddress = document.getElementById('shippingAddress');
        const babyAge = document.getElementById('babyAge');
        const allergies = document.getElementById('allergies');


        // Sidebar Elements
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const closeSidebarBtn = document.getElementById('close-sidebar-btn');
        const sidebarOverlay = document.getElementById('sidebar-overlay');

        let currentOrderData = {};

        // ×¤×•× ×§×¦×™×” ×œ×§×‘×œ×ª ×ª××¨×™×š ×•×©×¢×” ×‘×¤×•×¨××˜ ×¢×‘×¨×™
        function getCurrentDateTime() {
            const now = new Date();
            const options = {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            return now.toLocaleDateString('he-IL', options);
        }

        function updateTotal() {
            const quantity = parseInt(copiesInput.value) || 2;
            let total = PRICE_PER_SOAP * quantity;
            let finalTotal = total;
            
            if (isDiscountApplied) {
                finalTotal = Math.round(total * (1 - discountRate));
                oldPriceEl.textContent = `â‚ª${total}`;
                oldPriceEl.classList.add('show');
            } else {
                oldPriceEl.classList.remove('show');
            }

            totalPriceEl.textContent = `â‚ª${finalTotal}`;
            paymentTotalAmount.textContent = `â‚ª${finalTotal}`; 
        }

        function applyCoupon() {
            const inputCode = couponInput.value.trim().toUpperCase();
            
            if (COUPONS.hasOwnProperty(inputCode)) {
                if (!isDiscountApplied) {
                    isDiscountApplied = true;
                    discountRate = COUPONS[inputCode]; 
                    const discountPercent = discountRate * 100;

                    couponMsg.textContent = `×”×§×•×¤×•×Ÿ ×”×•×¤×¢×œ! (${discountPercent}% ×”× ×—×”)`;
                    couponMsg.className = "coupon-msg success";
                    
                    couponInput.disabled = true; 
                    applyCouponBtn.disabled = true;
                    applyCouponBtn.textContent = "V";
                    updateTotal();
                }
            } else if (inputCode === "") {
                couponMsg.textContent = "×”×–×Ÿ ×§×•×“";
                couponMsg.className = "coupon-msg error";
            } else {
                couponMsg.textContent = "×§×•×“ ×©×’×•×™";
                couponMsg.className = "coupon-msg error";
            }
        }


        function closeModal(modalElement) {
            modalElement.classList.remove('show');
        }

        // --- Sidebar Logic ---
        function toggleSidebar() {
            sidebar.classList.toggle('open');
            sidebarOverlay.classList.toggle('show');
        }

        sidebarToggle.addEventListener('click', toggleSidebar);
        closeSidebarBtn.addEventListener('click', toggleSidebar);
        sidebarOverlay.addEventListener('click', toggleSidebar);
        
        document.querySelectorAll('.sidebar a').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                    if (sidebar.classList.contains('open')) {
                         toggleSidebar();
                    }
                }
            });
        });

        // --- ×©×œ×™×—×ª ×”××™×™×œ ×¢× ×›×œ ×”×¤×¨×˜×™× ×”×“×¨×•×©×™× ---
        function sendOrderEmail() {
            if (Object.keys(currentOrderData).length === 0) {
                return;
            }

            const templateParams = {
                name: currentOrderData.name || '',
                phone: currentOrderData.phone || '',
                email: currentOrderData.email || '',
                city: currentOrderData.city || '',
                address: currentOrderData.address || '',
                time: getCurrentDateTime(),
                copies: currentOrderData.copies + ' ×™×—×™×“×•×ª',
                recipe: currentOrderData.recipe || '',
                shape: currentOrderData.shape || '',
                essentialOil: currentOrderData.essentialOil || '×œ×œ×',
                dedication: currentOrderData.blessing || '×œ×œ× ×”×§×“×©×”',
                babyAge: currentOrderData.babyAge ? currentOrderData.babyAge + ' ×—×•×“×©×™×' : '×œ× ×¦×•×™×Ÿ',
                allergies: currentOrderData.allergies || '×œ×œ×',
                total: currentOrderData.totalPrice
            };

            emailjs.send('service_cprtttd', 'template_m39ushb', templateParams)
                .then(function(response) {
                    console.log('××™×™×œ × ×©×œ×— ×‘×”×¦×œ×—×”!', response.status, response.text);
                }, function(error) {
                    console.warn('×©×’×™××” ×‘×©×œ×™×—×ª ××™×™×œ:', error);
                });
        }
        // --- ×¡×™×•× ×©×œ×™×—×ª ×”××™×™×œ ---

        openOrderModalBtn.addEventListener('click', ()=>{ 
            updateTotal();
            productSelectionModal.classList.add('show'); 
        });

        copiesInput.addEventListener('change', updateTotal);
        applyCouponBtn.addEventListener('click', applyCoupon);
        couponInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                e.preventDefault(); 
                applyCoupon();
            }
        });
        
        updateTotal(); 


        // --- CAROUSEL LOGIC (RTL FIXED) ---
        (function(){
            const slidesEl = document.getElementById('slides');
            const slides = Array.from(slidesEl.children);
            if (slides.length <= 1) return;
            let index = 0;
            const intervalMs = 3000; // Time per slide
            let timer = null;
            
            function update(){
                const slideWidth = 100 / slides.length; 
                
                slidesEl.style.transform = `translateX(${index * slideWidth}%)`;
            }

            function nextSlide(){ 
                index = (index + 1) % slides.length; 
                update(); 
            }
            
            function startTimer(){ 
                if(timer) clearInterval(timer); 
                timer = setInterval(nextSlide, intervalMs); 
            }
            
            startTimer();

            const carouselWrap = document.querySelector('.carousel-wrap');
            carouselWrap.addEventListener('mouseenter', ()=>{ if(timer) clearInterval(timer); });
            carouselWrap.addEventListener('mouseleave', ()=>{ startTimer(); });

            update();
        })();
        // --- END CAROUSEL LOGIC ---

        // --- Step 1 to Step 2 Transition ---
        continueToShippingBtn.addEventListener('click', ()=>{
            const recipe = recipeInput.value;
            const shape = shapeInput.value;
            
            if (!recipe) {
                alert('×× × ×‘×—×¨×• ××ª×›×•×Ÿ/××’×¢.');
                return;
            }
            if (!shape) {
                alert('×× × ×‘×—×¨×• ×¦×•×¨×” ×¨×¦×•×™×”.');
                return;
            }
            
            currentOrderData.copies = copiesInput.value;
            currentOrderData.totalPrice = paymentTotalAmount.textContent;
            currentOrderData.recipe = recipe;
            currentOrderData.shape = shape;
            currentOrderData.essentialOil = essentialOilInput.value;
            currentOrderData.blessing = blessingInput.value.trim();

            closeModal(productSelectionModal);
            shippingDetailsModal.classList.add('show');
        });

        // --- Step 2 Back to Step 1 ---
        backToProductsBtn.addEventListener('click', ()=>{
            closeModal(shippingDetailsModal);
            productSelectionModal.classList.add('show');
        });
        
        // --- Step 2 to Step 3 Transition ---
        continueToPaymentBtn.addEventListener('click', (e)=>{
            const name = shippingName.value.trim();
            const phone = shippingPhone.value.trim();
            const email = shippingEmail.value.trim();
            const city = shippingCity.value.trim();
            const address = shippingAddress.value.trim();
            const age = babyAge.value.trim();
            const notes = allergies.value.trim();
            
            if (!name || !phone || !email || !city || !address || !age) {
                alert('×× × ××œ××• ××ª ×›×œ ×¤×¨×˜×™ ×”××©×œ×•×— ×•×”×”×ª×××” ×”××™×©×™×ª (×›×•×œ×œ ×’×™×œ ×”×ª×™× ×•×§).');
                return;
            }
            
            currentOrderData.name = name;
            currentOrderData.phone = phone;
            currentOrderData.email = email;
            currentOrderData.city = city;
            currentOrderData.address = address;
            currentOrderData.babyAge = age;
            currentOrderData.allergies = notes;

            closeModal(shippingDetailsModal);
            paymentModal.classList.add('show');
        });

        openBitApp.addEventListener('click', ()=>{
            sendOrderEmail(); 
            
            window.open('https://www.bitpay.co.il/app/me/9364874B-AF78-48EC-1189-1141F63194B7269A', '_blank');

            closeModal(paymentModal);
        });

        document.querySelectorAll('.close-modal').forEach(button => {
            button.addEventListener('click', () => {
                const modalId = button.dataset.modal || (button.closest('.modal') ? button.closest('.modal').id : null);
                if (modalId === 'paymentModal') {
                    closeModal(document.getElementById(modalId));
                    shippingDetailsModal.classList.add('show');
                } else if (modalId) {
                    closeModal(document.getElementById(modalId));
                }
            });
        });

        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) {
                    closeModal(modal);
                }
            });
        });

    </script>
</body>
</html>

